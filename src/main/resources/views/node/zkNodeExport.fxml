<?xml version="1.0" encoding="UTF-8"?>
<?import cn.oyzh.fx.plus.controls.CancelButton?>
<?import cn.oyzh.fx.plus.controls.FlexCheckBox?>
<?import cn.oyzh.fx.plus.controls.FlexComboBox?>
<?import cn.oyzh.fx.plus.controls.FlexFlowPane?>
<?import cn.oyzh.fx.plus.controls.FlexHBox?>
<?import cn.oyzh.fx.plus.controls.FlexVBox?>
<?import cn.oyzh.fx.plus.controls.FXLabel?>
<?import cn.oyzh.fx.plus.controls.IconButton?>
<?import cn.oyzh.fx.plus.controls.MsgTextArea?>
<?import cn.oyzh.fx.plus.controls.ReadOnlyTextField?>
<?import cn.oyzh.fx.plus.handler.StateManager?>
<?import cn.oyzh.fx.plus.svg.SVGGlyph?>
<?import javafx.collections.FXCollections?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.layout.FlowPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Text?>
<?import java.lang.String?>
<FlexVBox styleClass="panel,panel-primary" xmlns:fx="http://javafx.com/fxml/1"
          fx:controller="cn.oyzh.easyzk.controller.node.ZKNodeExportController" realWidth="850" realHeight="650">
    <fx:define>
        <StateManager fx:id="stateManager" managedBindVisible="true"/>
    </fx:define>
    <FlexHBox flexWidth="100%" realHeight="50">
        <FXLabel text="节点路径" realHeight="30" realWidth="65" styleClass="lbl,lbl-primary">
            <HBox.margin>
                <Insets left="20" top="10"/>
            </HBox.margin>
        </FXLabel>
        <ReadOnlyTextField fx:id="nodePath" realHeight="30" flexWidth="100% - 160">
            <HBox.margin>
                <Insets left="10" top="10"/>
            </HBox.margin>
        </ReadOnlyTextField>
    </FlexHBox>
    <FlexHBox flexWidth="100%" realHeight="50">
        <FXLabel text="导出选项" realHeight="30" realWidth="65" styleClass="lbl,lbl-primary">
            <HBox.margin>
                <Insets left="20" top="10"/>
            </HBox.margin>
        </FXLabel>
        <FXLabel text="格式:" realWidth="30">
            <HBox.margin>
                <Insets left="10" top="20"/>
            </HBox.margin>
        </FXLabel>
        <FlexComboBox stateManager="$stateManager" realWidth="120" initIndex="0" tipText="选择一种导出方式"
                      fx:id="format">
            <items>
                <FXCollections fx:factory="observableArrayList">
                    <String fx:value="json格式(推荐)"/>
                    <String fx:value="txt格式"/>
                </FXCollections>
            </items>
            <HBox.margin>
                <Insets left="5" top="12"/>
            </HBox.margin>
        </FlexComboBox>
        <FlexFlowPane fx:id="prettyPane">
            <FXLabel text="美化:" realWidth="30">
                <FlowPane.margin>
                    <Insets left="10" top="20"/>
                </FlowPane.margin>
            </FXLabel>
            <FlexComboBox stateManager="$stateManager" prefWidth="100" initIndex="0" tipText="美化json" fx:id="pretty">
                <items>
                    <FXCollections fx:factory="observableArrayList">
                        <String fx:value="开启"/>
                        <String fx:value="关闭"/>
                    </FXCollections>
                </items>
                <FlowPane.margin>
                    <Insets left="5" top="12"/>
                </FlowPane.margin>
            </FlexComboBox>
        </FlexFlowPane>
        <FlexFlowPane fx:id="prefixPane" visible="false">
            <FXLabel text="前缀:" realWidth="30">
                <FlowPane.margin>
                    <Insets left="10" top="20"/>
                </FlowPane.margin>
            </FXLabel>
            <FlexComboBox stateManager="$stateManager" prefWidth="100" initIndex="0" tipText="设置前缀" fx:id="prefix">
                <items>
                    <FXCollections fx:factory="observableArrayList">
                        <String fx:value="不设置"/>
                        <String fx:value="create"/>
                        <String fx:value="set"/>
                    </FXCollections>
                </items>
                <FlowPane.margin>
                    <Insets left="5" top="12"/>
                </FlowPane.margin>
            </FlexComboBox>
        </FlexFlowPane>
    </FlexHBox>
    <FlexHBox flexWidth="100%" realHeight="50">
        <FXLabel text="导出配置" realHeight="30" realWidth="65" styleClass="lbl,lbl-primary">
            <HBox.margin>
                <Insets left="20" top="10"/>
            </HBox.margin>
        </FXLabel>
        <!-- <FXLabel text="字符:" realWidth="30"> -->
        <!--     <HBox.margin> -->
        <!--         <Insets left="10" top="20"/> -->
        <!--     </HBox.margin> -->
        <!-- </FXLabel> -->
        <!-- <CharsetComboBox prefWidth="120" fx:id="charset" promptText="导出字符集" tipText="默认是此连接的字符集"> -->
        <!--     <HBox.margin> -->
        <!--         <Insets left="5" top="12"/> -->
        <!--     </HBox.margin> -->
        <!-- </CharsetComboBox> -->
        <FlexCheckBox stateManager="$stateManager" fx:id="dictSort" selected="true" text="按字典排序"
                      tipText="节点路径按字典排序">
            <HBox.margin>
                <Insets left="10" top="18"/>
            </HBox.margin>
        </FlexCheckBox>
        <FlexCheckBox stateManager="$stateManager" fx:id="applyFilter" text="适用过滤配置"
                      tipText="适用过滤配置列表的数据">
            <HBox.margin>
                <Insets left="10" top="18"/>
            </HBox.margin>
        </FlexCheckBox>
        <!-- <FlexCheckBox fx:id="excludeEphemeral" disable="true" selected="true" text="排除临时节点"> -->
        <!--     <HBox.margin> -->
        <!--         <Insets left="10" top="18"/> -->
        <!--     </HBox.margin> -->
        <!-- </FlexCheckBox> -->
    </FlexHBox>
    <FlexHBox flexWidth="100%" realHeight="360">
        <FXLabel text="过程信息" realHeight="30" realWidth="65" styleClass="lbl,lbl-primary">
            <HBox.margin>
                <Insets left="20" top="10"/>
            </HBox.margin>
        </FXLabel>
        <FlexVBox flexWidth="100% - 140" flexHeight="100%">
            <HBox.margin>
                <Insets left="10" top="10"/>
            </HBox.margin>
            <MsgTextArea editable="false" maxLine="300" fx:id="exportMsg" flexWidth="100%" flexHeight="100% - 20"/>
            <FXLabel fx:id="exportStatus"/>
        </FlexVBox>
    </FlexHBox>
    <FlexHBox flexWidth="100%" realHeight="50">
        <IconButton stateManager="$stateManager" tipText="开始执行导出" onAction="#doExport"
                    realHeight="30"
                    styleClass="btn,btn-primary"
                    text="导出"
                    iconSizePercent="0.75">
            <graphic>
                <SVGGlyph url="/font/export.svg" color="white"/>
            </graphic>
            <HBox.margin>
                <Insets left="95" top="10"/>
            </HBox.margin>
        </IconButton>
        <IconButton disable="true" text="结束" fx:id="stopExportBtn" tipText="结束导出" onAction="#stopExport"
                    styleClass="btn,btn-default"
                    realHeight="30" iconSizePercent="0.9">
            <graphic>
                <SVGGlyph url="/font/stop-circle-line.svg" color="white"/>
            </graphic>
            <HBox.margin>
                <Insets left="15" top="10"/>
            </HBox.margin>
        </IconButton>
        <CancelButton text="关闭" iconSizePercent="0.6">
            <HBox.margin>
                <Insets left="15" top="10"/>
            </HBox.margin>
        </CancelButton>
    </FlexHBox>
    <FlexVBox flexWidth="100%" fontSize="12">
        <FXLabel text="温馨提示:" textFill="#666">
            <VBox.margin>
                <Insets left="95" top="10"/>
            </VBox.margin>
        </FXLabel>
        <Text fill="#666" layoutY="65.0" text="1. 临时节点默认不执行导出">
            <VBox.margin>
                <Insets left="95" top="10"/>
            </VBox.margin>
        </Text>
        <Text fill="#666" layoutY="90.0" text="2. 节点无读取权限无法导出">
            <VBox.margin>
                <Insets left="95" top="10"/>
            </VBox.margin>
        </Text>
    </FlexVBox>
</FlexVBox>
